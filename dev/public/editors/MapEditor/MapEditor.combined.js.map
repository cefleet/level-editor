{"version":3,"sources":["MapEditor.js","Map.js","componants/LayerManager.js","componants/Sprite.js","componants/SpriteManager.js","componants/Tileset.js","componants/Tool.js","componants/ToolManager.js","componants/Trigger.js","componants/TriggerManager.js"],"names":[],"mappings":"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","file":"MapEditor.combined.js","sourcesContent":["MapEditor = function (options) {\n\n\toptions = options || {};\n\n\tthis.mainContainer = options.main || '';\n\tthis.gridContainer = options.grid ||'';\n\tthis.tilesetContainer = options.tileset ||'';\n\n\tthis.EventEmitter = options.EventEmitter || new EventEmitter();\n\n\tthis.map = {};\n\n\tthis.events = {\n\t  mapSaved : new Phaser.Signal()\n\t};\n\n\tthis.listenOutFor = [\n\t{\n\t\tevent:'createMap',\n\t\taction : 'create'\n\t},\n\t{\n\t\tevent:'saveMap',\n\t\taction : 'saveMap'\n\t}\n\n\t];\n\n\tthis.setupListeners();\n};\n\nMapEditor.prototype.constructor = MapEditor;\n\nPhaser.Utils.extend(MapEditor.prototype , {\n\t/*\n\t\tThis setups the listeners. It expects the trigger to send an array of\n\t\tthe arguments for the function that it will be preforming.\n\t*/\n\tsetupListeners : function(){\n\t\t/*\n\t\tDONT DELETE YET I MAY END UP USING THIS\n\t\tvar f = function(arr){\n\t\t\t//apply is the key thing here\n\t\t\tthis.$this[this.e.action].apply(this.$this, arr);\n\t};\n\n\t\tfor(var l in this.listenOutFor){\n\t\t\tvar e = this.listenOutFor[l];\n\t\t\tvar o = {$this: this,e : e};\n\t\t\tthis.EventEmitter.on(e.event, f.bind(o));\n\t\t}*/\n\n\t\tfor(var l in this.listenOutFor){\n\t\t\tvar e = this.listenOutFor[l];\n\t\t\tif(typeof this[e.action] === 'function'){\n\t\t\t\tthis.EventEmitter.on(e.event,this[e.action].bind(this));\n\t\t\t} else {\n\t\t\t\tconsole.warn('The function '+e.action+' is not found. The event '+\n\t\t\t\t\te.event+' will do nothing to this Object.');\n\t\t\t}\n\t\t}\n\t},\n\n\tcreate : function(name,grid,tileset,id){\n\t\tthis.destroy();\n\t\tthis.map = {};\n\n\t\ttileset = tileset || {};\n\t\ttileset.container = tileset.container || this.tilesetContainer;\n\t\tconsole.log(tileset.container);\n\n\t\tconsole.log($('#'+tileset.container));\n\t\tthis.tileset = new MapEditor.Tileset(tileset);\n\n\t\t//listeners for cross object communication\n\t\t//This is correct because Level Editor should be the 'glue' between the two\n\t\t//this.tileset.events.tilesetImageLoaded.add(this.grid.loadTileset, this.grid);\n\t\tgrid = grid || {};\n\t\tgrid.container = grid.container || this.gridContainer;\n\t\tthis.grid = new MapEditor.Map(grid);\n\n\t\t/*\n\t\tthis.grid.events.gameCreated.add(function(){\n\n\t\t\tthis.grid.loadTileset(this.tileset);\n\n\t\t\tthis.tileset.events.tileSelected.add(this.grid.setMarker, this.grid);\n\n\t\t\t//TODO this goes to a new class I think Tools\n\t\t\t//this.grid.events.toolChanged.add(GameMaker.UI.Actions._activateTool);\n\n\t\t\tthis.grid.events.layerAdded.add(function(o){\n\t\t\t\tGameMaker.UI.Actions.createNewLayerUI(o.name,o.id);\n\t\t\t});\n\t\t\t*\n\n\t\t}, this);\n\t\t*/\n\t\t//We can have a go between here so phaser events don't mesh with other events\n\t\tthis.layerManager = new MapEditor.LayerManager(this);\n\t\tthis.toolManager = new MapEditor.ToolManager(this);\n\t\tthis.triggerManager = new MapEditor.TriggerManager(this);\n\t\tthis.spriteManager = new MapEditor.SpriteManager(this);\n\n\t\t//We need to change the whoel triggering system\n\t\tthis.grid.events.triggerPlaced.add(function(loc){\n\t\t\tGameMaker.UI.Actions.createNewTriggerPopup();\n\t\t});\n\n\t\tthis.grid.events.spritePlaced.add(function(loc){\n\t\t\tGameMaker.UI.Actions.createNewSpritePopup();\n\t\t});\n\n\t\tthis.events.mapSaved.add(GameMaker.UI.Actions._saveMap);\n\n\n\t\t//ads in some settings\n\t\tthis.map.name =  name || 'My Map';\n\t\tthis.map.id = id || $uid();\n\t},\n\n\tdestroy : function(){\n\t\tdelete this.map;\n\n\t\tif(this.grid) {\n\t\t\tthis.grid.destroy();\n\t\t\tdelete this.grid;\n\t\t}\n\n\t\tif(this.tileset){\n\t\t\tthis.tileset.destroy();\n\t\t\tdelete this.tileset;\n\t\t}\n\t},\n\n\t/*\n\t* Saves the Map\n\t*/\n\tsaveMap : function(){\n\n\t\tvar layers = [];\n\n\t\t//TODO sort by the layers z index\n\t\t//into a temp array so they can be placed in this array in order\n\t\tvar tempArr = [];\n\t\tfor(var l in this.grid.layers){\n\t\t\ttempArr.push([l,this.grid.layers[l].order]);\n\t\t}\n\t\ttempArr.sort(function(a,b){return a[1]-b[1];});\n\t\tvar mapLayers = {};\n\t\t//for(var l in this.grid.layers){\n\t\tfor(var i = 0; i < tempArr.length; i++){\n\t\t\t//tempArr[i][0] should be the id\n\t\t\tvar layer = this.grid.layers[tempArr[i][0]];\n\t\t\tvar ar = [];\n\n\t\t\tfor(var t in layer.tiles){\n\t\t\t\tar.push(layer.tiles[t].tilesetId);\n\t\t\t}\n\n\t\t\tlayers.push({\n\t\t\t\tdata : ar,\n\t\t\t\theight : Number(this.grid.tilesy),\n\t\t\t\tname : l,\n\t\t\t\topacity : 1,\n\t\t\t\ttype : 'tilelayer',\n\t\t\t\tvisible : true,\n\t\t\t\twidth: Number(this.grid.tilesx),\n\t\t\t\tx : 0,\n\t\t\t\ty: 0\n\t\t\t});\n\n\t\t\tmapLayers[l] = {\n\t\t\t\tid : l,\n\t\t\t\tname : layer.name,\n\t\t\t\torder : layer.order\n\t\t\t};\n\t\t}\n\n\t\tvar json = {\n\t\t\theight : Number(this.grid.tilesy),\n\t\t\twidth: Number(this.grid.tilesx),\n\t\t\tlayers  : layers,\n\n\t\t\t//TODO possibly of combining tilesets\n\t\t\ttilesets : [\n\t\t\t{\n\t\t\t\tfirstgid : 1,\n\t\t\t\timage : this.tileset.image,\n\t\t\t\timageheight : Number(this.tileset.imageheight),\n\t\t\t\timagewidth : Number(this.tileset.imagewidth),\n\t\t\t\tmargin : 0,\n\t\t\t\tname : this.tileset.name,\n\t\t\t\tspacing : 0,\n\t\t\t\ttileheight: Number(this.tileset.tileheight),\n\t\t\t\ttilewidth : Number(this.tileset.tilewidth)\n\t\t\t}\n\t\t\t],\n\t\t\torientation:\"orthogonal\",\n\t\t\ttileheight : Number(this.tileset.tileheight),\n\t\t\ttilewidth:Number(this.tileset.tilewidth),\n\t\t\tversion :1\n\t\t};\n\n\t\tthis.map.tilemap = json;\n\t\tthis.map.layers = mapLayers;\n\t\tthis.map.tilesetId = this.tileset.id;\n\n\t//\tthis.events.mapSaved.dispatch(this.map);\n\t\tthis.EventEmitter.trigger('mapSaved',[this.map]);\n\t\t//\treturn this.map;\n\t},\n\n\n\tload : function(map){\n\t\tif(typeof map.tilemap === 'string'){\n\t\t\tmap.tilemap = JSON.parse(map.tilemap);\n\t\t}\n\n\n\t\ttileset = {\n\t\t\timage : map.tileset.image,\n\t\t\timageheight : Number(map.tileset.imageheight),\n\t\t\timagewidth : Number(map.tileset.imagewidth),\n\t\t\tname : map.tileset.name,\n\t\t\ttilewidth : Number(map.tileset.tilewidth),\n\t\t\ttileheight : Number(map.tileset.tileheight),\n\t\t\tcollisionTiles : map.tileset.collision,\n\t\t\tid : map.tileset._id\n\t\t};\n\n\t\tvar grid = {\n\t\t\ttilewidth : map.tilemap.tilewidth,\n\t\t\ttileheight : map.tilemap.tileheight,\n\t\t\ttilesx : map.tilemap.width,\n\t\t\ttilesy : map.tilemap.height\n\t\t};\n\n\t\tthis.create(map.name,grid,tileset,map.id);\n\n\t\t//the create has already made the grid\n\t\tthis.grid.events.tilesetLoaded.add(function(){\n\t\t\tthis.grid.loadLayers(map);\n\t\t}, this);\n\t\t//this.loadMapData = map;\n\n\t\t//TODO this is waiting o nthe wrong thing\n\t\t/*\n\t\tif(this.tileset.loaded === false\t){\n\t\tthis.tileset.onLoad = this._load.bind(this);\n\t} else {\n\tthis._load();\n}\n*/\n},\n\n\nchangeSettings : function(){},\n\nlaunchGame : function(options){\n\n\tthis.eOptions = options;\n\tthis.events.mapSaved.addOnce(this._launchGame, this);\n\tthis.saveMap();\n},\n\n_launchGame : function(map){\n\n\tvar options = this.eOptions;\n\toptions.map = this.map;\n\toptions.map.tileset = this.tileset;\n\n\tthis.grid.destroy();\n\tthis.tileset.destroy();\n\tdelete this.grid;\n\tdelete this.tileset;\n\n\tGameMaker.UI.Actions._playGame(options);\n},\n\n\n\naddLayer: function(name, id){\n\tthis.grid.createLayer(name, id);\n},\n\nactivateLayer : function(id){\n\tthis.grid.makeLayerActive(id);\n},\n\ntoggleLayerVisibility : function(id){\n\tthis.grid.toggleLayer(id);\n},\n\nchangeLayerName : function(id,newname){\n\tthis.grid.renameLayer(id,newname);\n},\n\norderLayers : function(order){\n\tthis.grid.orderLayers(order);\n},\n\ndeleteLayer : function(id){\n\tthis.grid.deleteLayer(id);\n},\n\nsetTool : function(tool){\n\tthis.grid.setToolType(tool);\n}\n});\n","MapEditor.Map = function (options) {\n\n\toptions = options || {};\n\tthis.container = options.container;\n\tthis.linecolor = options.line || 0x000000;\n\tthis.loc = options.loc || [0,0];\n\tthis.activeTileOp = 0;\n\tthis.tilewidth = options.tilewidth || 32;\n\tthis.tileheight = options.tileheight || 32;\n\tthis.tilesy = options.tilesy || 16;\n\tthis.tilesx = options.tilesx || 18;\n\tthis.offsetx = 0;\n\tthis.offsety = 0;\n\tthis.scale =1;\n\tthis.baseHeight = this.tilesy*this.tileheight;\n\tthis.baseWidth = this.tilesx*this.tilewidth;\n\tthis.toolType = 'single';\n\n\tthis.events = {\n\t\tgameCreated  : new Phaser.Signal(),\n\t\ttoolChanged : new Phaser.Signal(),\n\t\tlayerAdded : new Phaser.Signal(),\n\t\ttilesetLoaded : new Phaser.Signal(),\n\t\ttriggerPlaced : new Phaser.Signal(),\n\t\tspritePlaced : new Phaser.Signal()\n\t};\n\n    //setup\n    this.game = new Phaser.Game(this.tilewidth*this.tilesx,this.tileheight*this.tilesy, Phaser.CANVAS,this.container, {\n\n\t\tpreload : function(){\n\t\t\t//this is a little funky but it's fine for now\n\t\t\tthis.game.load.image('eraser', 'img/ui/erase.png');\n\t\t\t//this.game.load.image('single', 'img/ui/single.png');\n\t\t\tthis.game.load.image('fill', 'img/ui/fill.png');\n\t\t\tthis.game.load.image('select','img/ui/select.png');\n\t\t\tthis.game.load.image('trigger','img/ui/trigger.png');\n\t\t\tthis.game.load.image('sprite','img/ui/sprite.png');\n\n\t\t},\n\n\t\tcreate:function(){\n\t\t\tthis.game.canvas.oncontextmenu = function (e) { e.preventDefault(); };\n\t\t\tthis.game.scale.scaleMode = Phaser.ScaleManager.SHOW_ALL;\n\t\t\tthis.game.scale.setScreenSize();\n\t\t\tthis.game.stage.backgroundColor ='#545454'; //''\n\t\t\tthis.setup();\n\n\t\t\tthis.events.gameCreated.dispatch(this);\n\t\t}.bind(this)\n\t});\n\n\treturn this;\n};\n\nMapEditor.Map.prototype = {\n\n\tsetup : function(){\n\t\tthis.getContainerOffset();\n\t\tthis.drawGrid();\n\t\tthis.setupMouse();\n\t\tthis.marker = this.game.add.sprite(0,0,'');\n\t\tthis.marker.tilesetId = 0;\n\t\tthis.layers ={};\n\t\tthis.layersGroup =  this.game.add.group();\n\t},\n\n\t/*\n\t * Draws the grid\n\t */\n\tdrawGrid : function(){\n\n\t\tthis.gridImage = this.game.add.graphics(0, 0);  //init rect\n\t\tthis.gridImage.lineStyle(1, this.linecolor, 1); // width, color (0x0000FF), alpha (0 -> 1) // required settings\n\t\tthis.gridImage.drawRect(this.loc[0],this.loc[1], this.tilesx*this.tilewidth,this.tilesy*this.tileheight);\n\n\t\tvar r = 0;\n\t\tvar c = 0;\n\n\t\twhile(r <= this.tilesx){\n\t\t\tthis.gridImage.moveTo(this.loc[0]+(this.tilewidth*r), this.loc[1]); // x, y\n\t\t\tthis.gridImage.lineTo(this.loc[0]+(this.tilewidth*r), this.tileheight*(this.tilesy)+this.loc[1]);\n\t\t\tr++;\n\t\t}\n\n\t\twhile(c <= this.tilesy){\n\t\t\tthis.gridImage.moveTo(this.loc[0], this.loc[1]+(this.tileheight*c)); // x, y\n\t\t\tthis.gridImage.lineTo(this.tilewidth*(this.tilesx)+this.loc[0],this.loc[1]+(this.tileheight*c));\n\t\t\tc++;\n\t\t}\n\t},\n\n\t/*\n\t * Makes the tiles (id and location data) into an array\n\t * */\n\tmakeTiles : function(layer){\n\t\tvar r = 0;\n\t\tvar i = 0;\n\t\twhile(r < this.tilesy){\n\t\t\tvar c = 0;\n\t\t\twhile(c < this.tilesx){\n\t\t\t\tlayer.tiles[i] = {\n\t\t\t\t\tx : c*this.tilewidth+this.loc[0],\n\t\t\t\t\ty : r*this.tileheight+this.loc[1],\n\t\t\t\t\tid : i,\n\t\t\t\t\trow : c,\n\t\t\t\t\tcol : r,\n\t\t\t\t\tloc : c+'-'+r,\n\t\t\t\t\ttilesetId : 0\n\t\t\t\t};\n\t\t\t\tc++;\n\t\t\t\ti++;\n\t\t\t}\n\t\t\tr++;\n\t\t}\n\t},\n\n\tloadLayers : function(map){\n\t\tthis.layers ={};// this effictivly deletes the \"base\" layer that was added on create. There would not be anything in it so it shouldn't hurt anything\n\t\tvar len = map.tilemap.layers.length;\n\t\tvar layers = map.tilemap.layers;\n\t\tfor(var j = 0; j < len; j++){\n\t\t\tthis.loadLayer(layers[j], map.layers[layers[j].name]);\n\t\t}\n\t\t//set the order\n\t\tvar tempArr = [];\n\t\tfor(var l in this.layers){\n\t\t\ttempArr.push([l,this.layers[l].order]);\n\t\t}\n\t\ttempArr.sort(function(a,b){return a[1]-b[1];});\n\n\t\tvar orderArr = [];\n\n\t\tfor(var i = 0; i < tempArr.length; i++){\n\t\t\torderArr.push(tempArr[0]);\n\t\t}\n\n\t\tthis.orderLayers(orderArr);\n\t\t//then get\n\t\tthis.makeLayerActive(layers[0].name);\n\t},\n\n\tloadLayer : function(layer, layerinfo){\n\t\tthis.createLayer(layerinfo.name,layerinfo.id);\n\t\tthis.layers[layerinfo.id].order = layerinfo.order;\n\t\tvar data = layer.data;\n\t\tfor(var i = 0; i < data.length; i++){\n\t\t\tvar id = data[i];\n\t\t\tvar t = this.layers[layer.name].tiles[i];\n\t\t\tt.tilesetId = id;\n\t\t\tif(id !== 0){\n\t\t\t\t//frame starts with 0 first item\n\t\t\t\t/*******\n\t\t\t\t * WRONG DO NOT CALL LE FROM INSIDE\n\t\t\t\t */\n\t\t\t\tif(GameMaker.LE.tileset.tiles[id-1]){\n\t\t\t\t\tt.sprite = this.game.add.sprite(t.x,t.y,GameMaker.LE.tileset.name, GameMaker.LE.tileset.tiles[id-1].frame);\n\t\t\t\t\tthis.layers[layerinfo.id].add(t.sprite);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\t/*\n\t * Creates a layer... possible even have a layer class in the future\n\t */\n\tcreateLayer : function(name, id){\n\t\t//pushes the order of every one of them down\n\t\tvar highest = 0;\n\t\tfor(var layer in this.layers){\n\t\t\tif(this.layers[layer].order > highest) {\n\t\t\t\thighest = \tthis.layers[layer].order+1;\n\t\t\t}\n\t\t}\n\t\tthis.layers[id] = this.layersGroup.add(this.game.add.group());\n\t\tthis.layers[id].tiles = {};\n\t\tthis.makeTiles(this.layers[id]);\n\t\tthis.makeLayerActive(this.layers[id]);\n\t\tthis.layers[id].name = name;\n\t\tthis.layers[id].order = highest;\n\n\t\t this.events.layerAdded.dispatch({name:name,id:id});\n\t},\n\n\t//make layer active\n\tmakeLayerActive : function(layer){\n\t\tif(typeof layer === 'string'){\n\t\t\tlayer = this.layers[layer];\n\t\t}\n\t\tthis.activeLayer = layer;\n\t},\n\n\t//Show Hid layer\n\ttoggleLayer : function(layer){\n\t\tif(typeof layer === 'string'){\n\t\t\tlayer = this.layers[layer];\n\t\t}\n\n\t\tif(layer.visible){\n\t\t\tlayer.visible = false;\n\t\t} else {\n\t\t\tlayer.visible = true;\n\t\t}\n  },\n\n\trenameLayer : function(layer, newName){\n\t\tif(typeof layer === 'string'){\n\t\t\tlayer = this.layers[layer];\n\t\t}\n\n\t\tlayer.name = newName;\n\t},\n\n\t//orders the layers by id or actall object. order is an array\n\torderLayers : function(order){\n\t\tvar o = order.length;\n\t\tfor(var i =0; i < order.length; i++){\n\t\t\tvar layer = order[i];\n\t\t\tif(typeof  layer === 'string'){\n\t\t\t\tlayer = this.layers[layer];\n\t\t\t}\n\t\t\tif(typeof layer !== 'undefined'){\n\t\t\t\tlayer.order = o;\n\t\t\t\tthis.layersGroup.sendToBack(layer);\n\t\t\t\to--;\n\t\t\t}\n\t\t}\n\t},\n\n\tdeleteLayer : function(layer){\n\t\tconsole.log(layer);\n\t\tif(typeof layer === 'string'){\n\t\t\tlayer = this.layers[layer];\n\t\t}\n\t\tconsole.log(layer);\n\t\tthis.layersGroup.remove(layer,true);\n\n\n\t},\n\n\t/*\n\t * Returns the tile under the point (Point does not haveto be a real point it just an object with properties of x, y)\n\t */\n\tgetTileFromPoint : function(point){\n\t\t//Tiles are here\n\t\tfor(var tile in this.activeLayer.tiles){\n\t\t\tvar t = this.activeLayer.tiles[tile];\n\t\t\tif(point.x > t.x && point.x < t.x+this.tilewidth && point.y > t.y && point.y < t.y+this.tileheight){\n\t\t\t\treturn t;\n\t\t\t}\n\t\t}\n\t},\n\n\t/*\n\t * Sets the active Tile\n\t * * This name should be moveMarkerToTileFromPoint\n\t */\n\tsetActiveTileFromPoint : function(point){\n\t\tvar t = this.getTileFromPoint(point);\n\t\tif(t){\n\t\t\tthis.activeTile = t;\n\t\t\tthis.marker.x = t.x;\n\t\t\tthis.marker.y = t.y;\n\t\t}\n\t\treturn this.activeTile;\n\t},\n\n\t/*\n\t * Uses the activeTile to set the tileset ID\n\n\t */\n\tsetTileIdOfActiveTileFromMarker : function(){\n\t\tthis.activeTile.tilesetId = this.marker.tilesetId;\n\t},\n\n\t/*\n\t * Uses the active tile and marker sprite to place a sprite on the\n\t */\n\tsetSpriteOfActiveTileFromMarker : function(){\n\t\tthis.activeTile.sprite = this.game.add.sprite(this.marker.x,this.marker.y,this.marker.key,this.marker.frame);\n\t\tthis.activeLayer.add(this.activeTile.sprite);\n\t},\n\n\t/*\n\t * combines the id and sprite\n\t */\n\tsetActiveTileFromMarker : function(){\n\t\tthis.unsetActiveTile();\n\t\tthis.setTileIdOfActiveTileFromMarker();\n\t\tthis.setSpriteOfActiveTileFromMarker();\n\t},\n\t/*\n\t * Unsets the active tile\n\t */\n\tunsetActiveTile : function(){\n\t\tif(this.activeTile){\n\t\t\tif(this.activeTile.sprite){\n\t\t\t\tthis.activeTile.sprite.destroy();\n\t\t\t}\n\t\t}\n\n\t\tthis.activeTile.tilesetId = 0;\n\t},\n\n\tsetupMouse : function(){\n\t\tthis.game.input.mouse.mouseMoveCallback = function(c){\n\t\t\tvar p = {\n\t\t\t\tx : c.offsetX/this.scale,\n\t\t\t\ty : c.offsetY/this.scale\n\t\t\t};\n\n\t\t\tif(this.inGrid(p)){\n\t\t\t\tthis.setActiveTileFromPoint(p);\n\t\t\t\tif(this.game.input.activePointer.isDown){\n\n\t\t\t\t\tif(c.which === 1){\n\n\t\t\t\t\t\tif(this.toolType === 'eraser'){\n\t\t\t\t\t\t\tthis.unsetActiveTile();\n\t\t\t\t\t\t} else if(this.toolType === 'single') {\n\t\t\t\t\t\t\tthis.setActiveTileFromMarker();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}.bind(this);\n\n\t\tthis.game.input.mouse.mouseDownCallback = function(c){\n\t\t\tvar p = {\n\t\t\t\tx : c.offsetX/this.scale,\n\t\t\t\ty : c.offsetY/this.scale\n\t\t\t};\n\t\t\tif(this.inGrid(p)){\n\t\t\t\tthis.setActiveTileFromPoint(p);\n\n\t\t\t\tif(c.which === 1){\n\n\t\t\t\t\t\tif(this.toolType === 'eraser'){\n\t\t\t\t\t\t\tthis.unsetActiveTile();\n\t\t\t\t\t\t} else if(this.toolType === 'single') {\n\t\t\t\t\t\t\tthis.setActiveTileFromMarker();\n\t\t\t\t\t\t} else if (this.toolType === 'trigger'){\n\t\t\t\t\t\t\tthis.placeTrigger();\n\t\t\t\t\t\t} else if(this.toolType === 'sprite'){\n\t\t\t\t\t\t\tthis.placeSprite();\n\t\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}.bind(this);\n\t},\n\n\tdestroy : function(){\n\t\tfor(var g in this.layers){\n\t\t\tthis.layers[g].destroy();\n\t\t}\n\t\tif(this.gridImage){\n\t\t\tthis.gridImage.destroy();\n\t\t}\n\t\tif(this.game){\n\t\t\tthis.game.input.mouse.mouseMoveCallback = function(){};\n\t\t\tthis.game.input.mouse.mouseDownCallback = function(){};\n\t\t\tthis.game.destroy();\n\t\t}\n\t},\n\n\tloadTileset : function(t){\n\t\tthis.spritesheet = this.game.load.spritesheet(t.name,t.image,t.tilewidth,t.tileheight);\n\n\t\tthis.spritesheet.onLoadComplete.add(function(){\n\t\t\t//Don't make the tileset box until the image is loaded\n\t\t\tthis.events.tilesetLoaded.dispatch();\n\t\t}, this);\n\n\n\t\tthis.spritesheet.start();\n\t},\n\n\tsetToolType : function(t){\n\t\t/*\n\t\t * t will be\n\t\t * 'single' -single tile\n\t\t * 'eraser'= erases tiles only.\n\t\t * 'fill' = fills the whole layer with one tile\n\t\t * 'sprite' = adds a sprite popup or it is a sprite image .. that's probaby the one\n\t\t * 'selector' = will select information like if a sprite is in the grid or\n\t\t * \"trigger\" = will add a trigger popup\n\t\t */\n\n\t\tthis.toolType = t;\n\t\tthis.marker.destroy();\n\t\tif(this.toolType !== 'single'){\n\t\t\tthis.marker = this.game.add.sprite(0,0, t);\n\t\t} else {\n\t\t\tthis.marker = this.game.add.sprite(0,0, '');\n\t\t}\n\t\tthis.marker.width = this.tilewidth;\n\t\tthis.marker.height = this.tileheight;\n\n\t\tthis.events.toolChanged.dispatch(this.toolType);\n\t},\n\n\tsetMarker : function(t){\n\t\tconsole.log(t);\n\t  if(this.toolType !== 'fill'){\n\t\t\tthis.setToolType('single');\n\t\t}\n\t\t//only fill will keep the marker\n\t\tthis.marker.destroy();\n\t\tthis.marker = this.game.add.sprite(0,0, t.name, t.selectedTile.frame*1);\n\t\tthis.marker.tilesetId = t.selectedTile.id;\n\n\t},\n\n\t/*\n\t * Checks to see if point is in the grid\n\t */\n\tinGrid : function(point){\n\t\tif(point.x > this.loc[0] && point.y > this.loc[1] && point.x < this.loc[0]+(this.tilesx*this.tilewidth) && point.y < this.loc[1]+(this.tilesy*this.tileheight)){\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t},\n\n\tgetContainerOffset : function(){\n\t\t//this breaks some of the game aspect\n\t\tif(this.container) {\n\t\t\tvar e = document.getElementById(this.container);\n\t\t\tvar o = e.getBoundingClientRect();\n\t\t\tthis.offsetx = o.left;\n\t\t\tthis.offsety = o.top;\n\t\t}\n\t},\n\n\tscaleTo : function(scale){\n\t\t\t//scale is a # that is a %\n\t\t\tvar decScale = Number(scale)/100;\n\t\t\tthis.game.scale.maxWidth = this.baseWidth*decScale;\n\t\t\tthis.game.scale.maxHeight = this.baseHeight*decScale;\n\t\t\tthis.game.scale.refresh();\n\t\t\tthis.scale = decScale;\n\t},\n\n\t//Places the trigger\n\tplaceTrigger : function(){\n\t\tconsole.log(this.activeTile);\n\t\tvar loc = '';//get active tile location\n\t\tthis.events.triggerPlaced.dispatch(loc);\n\n\t\t//TODO this may need to be moved at some point in time\n\t\t//this.triggers.create();\n\t},\n\n\tplaceSprite : function(){\n\t\tconsole.log(this.activeTile);\n\t\tvar loc = '';//get active tile location\n\t\tthis.events.spritePlaced.dispatch(loc);\n\n\t\t//TODO this may need to be moved at some point in time\n\t\t//this.triggers.create();\n\t},\n};\n\nMapEditor.Map.prototype.constructor = MapEditor.Map;\n","MapEditor.LayerManager  = function(parent){\n  this.parent = parent;\n  this.EventEmitter = this.parent.EventEmitter;\n  this.layers = {};\n\n  return this;\n};\n\nMapEditor.LayerManager.prototype = {\n\n  create : function(options){\n    console.log(this);\n    var t = new MapEditor.Layer(options);\n    this.layers[t.id] = t;\n    //this.events.triggerCreated.dispatch(t);\n    this.EventEmitter.trigger('layersCreated', t);\n  }\n};\n\nMapEditor.LayerManager.prototype.constructor = MapEditor.LayerManager;\n","MapEditor.Trigger = function(options){\n\toptions = options || {};\n\tthis.id = options.id || $uid();\n\tthis.name = options.name || 'sprite';\n\tthis.spritesheet = options.spritesheet || 'img/player.png';\n\tthis.frameSize = options.frameSize || {width : '', height:''}; //default is the whole image. Othewise it is a object with width/ height attributes\n\tthis.location = options.location || {x:0,y:0};//location\n\tthis.layer = options.layer || '0';\n\n\t//these all are added when you edit a sprite\n\tthis.animations = false; //This is an object {name : [frames], name: [frames]}\n\tthis.patrol = false; //or an array of locations\n\tthis.onPlayerCollision = false; //The options here are false,destroy,trigger,or code //You can set it false and apply trigger from the trigger or apply it here\n\tthis.onSpriteCollision = false;//What happens when colliding with another sprite false,destroy,trigger,or code\n\n\t//this is not nessessary for the editor.\n\tthis.patrolling = false;\n\tthis.patrolPos = 0; // the index of the sprites patrol\n\n\treturn this;\n};\n","MapEditor.SpriteManager = function(parent){\n\tthis.parent = parent;\n\tthis.EventEmitter = this.parent.EventEmitter;\n\n\tthis.sprites = {};\n\n\treturn this;\n};\n\nMapEditor.SpriteManager.prototype = {\n\n\tcreate : function(options){\n\t//\tconsole.log(this);\n\t\tvar t = new MapEditor.Sprite(options);\n\t\tthis.sprites[t.id] = t;\n\t\t//this.events.spriteCreated.dispatch(t);\n\t\tthis.EventEmitter.trigger('spriteCreated', t);\n\t}\n};\nMapEditor.SpriteManager.prototype.constructor = MapEditor.SpriteManager;\n","MapEditor.Tileset = function (options) {\n\t//With these changes\n\toptions = options || {};\n\tthis.container = options.container;\n\tthis.image  = options.image || 'img/sampletileset.png';\n\tthis.name = options.name || 'tiles';\n\tthis.imageheight = options.imageheight || 256;\n\tthis.imagewidth = options.imagewidth || 256;\n\tthis.tilewidth = options.tilewidth || 32;\n\tthis.tileheight = options.tileheight || 32;\n\tthis.collisionTiles = options.collisionTiles ||  [0,1,[2-23]]; //this is purposlly writtein to show that it can be an array of number or an array of arrays sets or a mixture\n    this.tiles = {};\n    this.bgColor = options.bgColor || {\n\t\tline : 0x2F2F2F,\n\t\tfill : 0x9C9C9C\n\t};\n\tthis.loaded = false;\n\tthis.events = {\n\t\ttilesetImageLoaded : new Phaser.Signal(),\n\t\ttileSelected : new Phaser.Signal(),\n\t\tgameCreated  : new Phaser.Signal()\n\t};\n\n\tif(!options.id) {\n\t  console.log('There seems to be a problem with the option id');\n\t} else {\n\t\tconsole.log(options.id);\n\t\tthis.id = options.id;\n\t}\n\n\tthis.game = new Phaser.Game(this.imagewidth+(this.imagewidth/this.tilewidth),this.imageheight+(this.imageheight/this.tileheight), Phaser.CANVAS,this.container, {\n\t\tcreate:function(){\n\t\t\tthis.game.canvas.oncontextmenu = function (e) { e.preventDefault(); };\n\t\t\tthis.game.stage.backgroundColor ='#000000';\n\t\t\tthis.events.tilesetImageLoaded.dispatch(this);\n\t\t\tthis.spritesheet = this.game.load.spritesheet(this.name,this.image,this.tilewidth,this.tileheight);\n\t\t\tthis.setup();\n\t\t\tthis.events.gameCreated.dispatch(this);\n\t\t}.bind(this)\n\t});\n\n\treturn this;\n};\n\nMapEditor.Tileset.prototype = {\n\n\t/* creates the tilsets\n\t */\n\tcreate : function(){\n\n\t\tthis.tileGroup = this.game.add.group();\n\n\n\t\tvar rows= this.imageheight/this.tileheight;\n\t\tvar cols = this.imagewidth/this.tilewidth;\n\n\t\tvar t = cols*rows;\n\t\tvar x;\n\t\tvar y;\n\t\tvar r = 0;\n\t\tvar c = 0;\n\t\tfor(var i = 0; i < t; i++){\n\t\t\tif(c >= cols){\n\t\t\t\tc = 0;\n\t\t\t\tr++;\n\t\t\t}\n\t\t\tx = c*this.tilewidth;\n\t\t\ty = r*this.tileheight;\n\t\t\tthis.tiles[i] = this.game.add.button(x+c, y+r, this.name, this.selectTile, this);\n\t\t\tthis.tiles[i].id = i+1;\n\t\t\tthis.tiles[i].frame = i;\n\t\t\tthis.tileGroup.add(this.tiles[i]);\n\t\t\tc++;\n\t\t}\n\t\tthis.loaded = true;\n\t\tthis.onLoad();\n\t},\n\n\tdestroy : function(){\n\n\t\tif(this.tileGroup){\n\t\t\tthis.tileGroup.destroy();\n\t\t}\n\n\t\tthis.game.destroy();\n\t},\n\n\t/*\n\t * Selects the tile\n\t */\n\tselectTile : function(item){\n\t\tthis.selectedTile = item;\n\t\tthis.events.tileSelected.dispatch(this);\n\t},\n\n\t/*\n\t * run once loaded. Should be overwritten\n\t * kinda gheto hqackish\n\t */\n\tonLoad : function(){\n\n\t},\n\n\tsetup : function(){\n\t\tthis.spritesheet.onLoadComplete.add(function(){\n\t\t\t//Don't make the tileset box until the image is loaded\n\t\t\tthis.create();\n\t\t}, this);\n\t\tthis.spritesheet.start();\n\t}\n};\n\nMapEditor.Tileset.prototype.constructor = MapEditor.Tileset;\n","MapEditor.Trigger = function(options){\n  options = options || {};\n  this.id = options.id || $uid();//no longer a viable option\n  this.name = options.name || 'tool';\n  this.image = options.image || 'tool.png';\n\n  return this;\n};\n","MapEditor.ToolManager  = function(parent){\n  this.parent = parent;\n  this.EventEmitter = this.parent.EventEmitter;\n  this.tools = {};\n\n  return this;\n};\n\nMapEditor.ToolManager.prototype = {\n\n  create : function(options){\n    console.log(this);\n    var t = new MapEditor.Tool(options);\n    this.tools[t.id] = t;\n    //this.events.triggerCreated.dispatch(t);\n    this.EventEmitter.trigger('toolCreated', t);\n  }\n};\n\nMapEditor.ToolManager.prototype.constructor = MapEditor.ToolManager;\n","MapEditor.Trigger = function(options){\n\toptions = options || {};\n\tthis.id = options.id || $uid();\n\tthis.name = options.name || 'trigger';\n\tthis.type = options.type || 'sprite'; //sprite,off\n\tthis.location = options.location || {x:0,y:0};//location\n\tthis.tileId = options.tileId || 0;\n\tthis.sprite = options.sprite || '';//if sprite is null then it is an invisible sprit\n\tthis.width = options.width || '32';\n\tthis.height = options.height || '32';\n\tthis.layer = options.layer || '0';\n\tthis.triggeredBy = options.triggeredBy || 'collide'; //collide, spriteCollide, action, trigger (ones that are called by trigger don't have a location)\n\tthis.actionType = options.actionType || 'addSprite'; //addSprite,removeSprite,moveSprite,animateSprite,showLayer,hideLayer, customCode\n\tthis.impactItem = options.impactItem || 'triggeredSprite';//this needs to be a sprite or a layer determined by \"this.actionType\" not used for customCode //this is the item impacted by trigger\n\tthis.onComplete = options.onComplete || '';//'',{action : callTrigger, trigger : trigername || id} , {action : callCode, code : function to run}\n\n\treturn this;\n};\n","MapEditor.TriggerManager  = function(parent){\n\tthis.parent = parent;\n\tthis.EventEmitter = this.parent.EventEmitter;\n\tthis.triggers = {};\n\treturn this;\n\n};\n\nMapEditor.TriggerManager.prototype = {\n\n\tcreate : function(options){\n\n\t\tvar t = new MapEditor.Trigger(options);\n\t\tthis.triggers[t.id] = t;\n\n\t}\n};\nMapEditor.TriggerManager.prototype.constructor = MapEditor.TriggerManager;\n"]}